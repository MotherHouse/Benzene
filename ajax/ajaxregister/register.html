<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script src="js/jquery-1.9.1.min.js" type="text/javascript"></script>
		<script type="text/javascript" language="JavaScript">
			$(function(){
				$("#button1").click(function(){
					$.ajax({
						type:"get",
						url:"register.php",
						dataType:"json",
						data:{
							username: $('#username').val(),
							passwd: $("#passwd").val()
						},
						success: function(data){
							alert(data.message);
						}
					});
				});
				
				$("#username").blur(function(){
					$.ajax({
						type:"get",
						url:"checkusername.php",
						dataType: "json",
						data:{
							username: $('#username').val(),
							passwd: $("#passwd").val()
						},
						success: function(data){
							$("#img1").empty();
							if(data.retcode == 0){
							    $("#img1").append("<img style='height: 20px; width: 20px;' src='img/right.jpg' />");
							}else{
								$("#img1").append("<img style='height: 20px; width: 20px;' src='img/wrong.jpg' />");
							}
							$("#img1").append(data.message);
						}
					});
				});
			})
		</script>
	</head>
	<body>
		<h1>注册</h1>
		<form>
			<p>
				<label for="username">用户名:</label>
				<input id="username" name="username" required placeholder="请填写需要注册的用户名"></input>
				<span style="height: 20px; width: 20px;" id="img1"></span>
			</p>
			<p>
				<label for="passwd">密码:</label>
				<input id="passwd" name="passwd" required type="password" placeholder="请填写注册密码" />
				
			</p>
			<p>
				<input id="button1" type="button" value="提交" />
			</p>
		</form>
	</body>
</html>
